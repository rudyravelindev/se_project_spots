!function(){"use strict";var e="/se_project_spots/",t=e+"images/logo.svg",n=e+"images/avatar.jpg",r=e+"images/pencil.svg",o=e+"images/plus.svg",a=e+"images/pencil-edit-avatar.svg",c={formSelector:".modal__form",inputSelector:".modal__input",subbmitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_invalid",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},i=function(e,t,n){e.querySelector("#".concat(t.id,"-error")).textContent="",t.classList.remove(n.inputErrorClass)},l=function(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove(n.inactiveButtonClass)):u(t,n)},u=function(e,t){e.disabled=!0,e.classList.add(t.inactiveButtonClass)},d=function(e){document.querySelectorAll(e.formSelector).forEach((function(t){!function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.subbmitButtonSelector);l(n,r,t),n.forEach((function(o){o.addEventListener("input",(function(){!function(e,t,n){console.log(t.validationMessage),t.validity.valid?i(e,t,n):function(e,t,n,r){e.querySelector("#".concat(t.id,"-error")).textContent=n,t.classList.add(r.inputErrorClass)}(e,t,t.validationMessage,n)}(e,o,t),l(n,r,t)}))}))}(t,e)}))},s=function(e,t){Array.from(e.querySelectorAll(t.inputSelector)).forEach((function(n){i(e,n,t)}))};function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function v(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}d(c);var _=function(){return e=function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r},(t=[{key:"getAppInfo",value:function(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(this._checkResponse)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._checkResponse)}},{key:"editUserInfo",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:n})}).then(this._checkResponse)}},{key:"updateAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._checkResponse)}},{key:"addCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._checkResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}},{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"likeStatus",value:function(e,t){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:t?"DELETE":"PUT",headers:this._headers}).then(this._checkResponse)}}])&&m(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var h=document.querySelector(".profile__edit-btn"),p=document.querySelector(".profile__avatar-btn"),b=document.querySelector(".profile__name"),S=document.querySelector(".profile__description"),g=(document.querySelector("#card-template"),document.querySelector(".cards__list")),k=document.querySelector(".profile__add-btn"),q=document.querySelector("#edit-modal"),E=document.forms.modal__form,C=q.querySelector(".modal__close-btn"),L=q.querySelector("#profile-name-input"),A=q.querySelector("#profile-description-input"),D=document.querySelector("#add-card-modal"),U=document.forms["add-card-form"],P=D.querySelector(".modal__close-btn"),w=D.querySelector("#add-card-name-input"),I=D.querySelector("#add-card-link-input"),j=(D.querySelector(".modal__submit-btn_invalid"),document.querySelector("#preview-modal")),T=j.querySelector(".modal__image"),x=j.querySelector(".modal__caption"),O=j.querySelector(".modal__close-btn"),R=document.querySelector("#avatar-modal"),B=document.forms["edit-avatar"],F=R.querySelector("#avatar-url-input"),M=(R.querySelector(".modal__submit-btn"),R.querySelector(".modal__close-btn")),N=document.querySelector("#delete-modal"),J=N.querySelector(".modal__close-btn"),H=N.querySelector(".modal__submit-btn"),z=N.querySelector(".modal__submit-btn_type_cancel"),$=document.querySelector("#delete-form");document.addEventListener("DOMContentLoaded",(function(){document.querySelector(".header__logo").src=t,document.querySelector(".profile__avatar").src=n,document.querySelector(".profile__edit-btn img").src=r,document.querySelector(".profile__add-btn img").src=o,document.querySelector(".profile__pencil-icon").src=a}));var G,K,Q=new _({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"a1a73611-83bd-49ee-9a2d-adac9099df34","Content-Type":"application/json"}});function V(e,t,n,r){e.disabled=t,e.classList.toggle("modal__submit-btn_loading",t),e.textContent=t?n:r}function W(e){var t=document.querySelector("#card-template").content.querySelector(".card").cloneNode(!0);t.id="card-".concat(e._id);var n=t.querySelector(".card__image"),r=t.querySelector(".card__title"),o=t.querySelector(".card__like-btn"),a=t.querySelector(".card__delete-btn");return n.src=e.link,n.alt=e.name,r.textContent=e.name,a.addEventListener("click",(function(){!function(e,t){G=e,K=t._id,X(N)}(t,e)})),e.isLiked&&o.classList.add("card__like-btn_liked"),n.addEventListener("click",(function(){T.src=e.link,T.alt=e.name,x.textContent=e.name,X(j)})),o.addEventListener("click",(function(){var t,n,r;t=e._id,r=(n=o).classList.contains("card__like-btn_liked"),Q.likeStatus(t,r).then((function(e){e.isLiked?n.classList.add("card__like-btn_liked"):n.classList.remove("card__like-btn_liked")})).catch((function(e){console.error("Error updating like status:",e)}))})),t}function X(e){e.classList.add("modal_opened"),document.addEventListener("keydown",Z)}function Y(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",Z)}function Z(e){if("Escape"===e.key){var t=document.querySelector(".modal_opened");t&&Y(t)}}Q.getAppInfo().then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,c,i=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],a=r[1];console.log(a),a.forEach((function(e){var t=W(e);g.append(t)})),document.querySelector(".profile__avatar").src=o.avatar,b.textContent=o.name,S.textContent=o.about})).catch(console.error),J.addEventListener("click",(function(){Y(N)})),z.addEventListener("click",(function(){Y(N)})),H.addEventListener("click",(function(){var e=document.getElementById(N.dataset.cardToDelete);if(console.log("Card to delete:",N.dataset.cardToDelete),console.log("Card element found:",e),e){var t=N.dataset.cardToDelete.replace("card-","");console.log("Card ID to send to API:",t),Q.deleteCard(t).then((function(){e.remove(),Y(N)})).catch((function(e){console.error("Error deleting card:",e)}))}})),O.addEventListener("click",(function(){Y(j)})),p.addEventListener("click",(function(){s(B,c),X(R)})),M.addEventListener("click",(function(){return Y(R)})),B.addEventListener("submit",(function(e){e.preventDefault();var t=B.querySelector(".modal__submit-btn"),n=document.querySelector(".profile__avatar");V(t,!0,"Saving...","Save"),Q.updateAvatar({avatar:F.value}).then((function(e){n.src="".concat(e.avatar,"?t=").concat(Date.now()),B.reset(),Y(R),s(B,c),u(t,c)})).catch((function(e){console.error("Avatar update failed:",e),alert("Failed to update avatar. Please try again.")})).finally((function(){V(t,!1,"Saving...","Save"),u(t,c)}))})),document.querySelectorAll(".modal").forEach((function(e){e.addEventListener("click",(function(t){t.target===e&&Y(e)}))})),$.addEventListener("submit",(function(e){e.preventDefault(),V(H,!0,"Deleting...","Delete"),Q.deleteCard(K).then((function(){G.remove(),Y(N),G=null,K=null})).catch((function(e){console.error("Error deleting card:",e)})).finally((function(){V(H,!1,"Delete","Delete")}))})),h.addEventListener("click",(function(){L.value=b.textContent,A.value=S.textContent,s(E,c),X(q)})),C.addEventListener("click",(function(){Y(q)})),k.addEventListener("click",(function(){X(D)})),P.addEventListener("click",(function(){Y(D)})),E.addEventListener("submit",(function(e){e.preventDefault();var t=E.querySelector(".modal__submit-btn");V(t,!0,"Saving...","Save"),Q.editUserInfo({name:L.value,about:A.value}).then((function(e){b.textContent=e.name,S.textContent=e.about,E.reset(),Y(q),s(E,c),u(t,c)})).catch((function(e){console.error("Profile update failed:",e),alert("Failed to update profile. Please try again.")})).finally((function(){V(t,!1,"Saving...","Save"),u(t,c)}))})),U.addEventListener("submit",(function(e){e.preventDefault();var t=U.querySelector(".modal__submit-btn");V(t,!0,"Creating...","Create"),Q.addCard({name:w.value,link:I.value}).then((function(e){var n=W(e);g.prepend(n),U.reset(),Y(D),s(U,c),u(t,c)})).catch((function(e){console.error("Failed to add card:",e),alert("Failed to add card. Please try again.")})).finally((function(){V(t,!1,"Creating...","Create"),u(t,c)}))})),d(c)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQ0EsSUFBSUEsRUNEb0IscUIsZ0lDQVhDLEVBQVcsQ0FDdEJDLGFBQWMsZUFDZEMsY0FBZSxnQkFDZkMsc0JBQXVCLHFCQUN2QkMsb0JBQXFCLDRCQUNyQkMsZ0JBQWlCLDBCQUNqQkMsV0FBWSx3QkFTUkMsRUFBaUIsU0FBQ0MsRUFBUUMsRUFBU0MsR0FDcEJGLEVBQU9HLGNBQWMsSUFBREMsT0FBS0gsRUFBUUksR0FBRSxXQUMzQ0MsWUFBYyxHQUN6QkwsRUFBUU0sVUFBVUMsT0FBT04sRUFBT0wsZ0JBQ2xDLEVBaUJNWSxFQUFvQixTQUFDQyxFQUFXQyxFQUFVVCxJQU54QixTQUFDUSxHQUN2QixPQUFPQSxFQUFVRSxNQUFLLFNBQUNDLEdBQ3JCLE9BQVFBLEVBQU1DLFNBQVNDLEtBQ3pCLEdBQ0YsQ0FHTUMsQ0FBZ0JOLElBR2xCQyxFQUFTTSxVQUFXLEVBQ3BCTixFQUFTSixVQUFVQyxPQUFPTixFQUFPTixzQkFIakNzQixFQUFjUCxFQUFVVCxFQUs1QixFQUVNZ0IsRUFBZ0IsU0FBQ1AsRUFBVVQsR0FDL0JTLEVBQVNNLFVBQVcsRUFDcEJOLEVBQVNKLFVBQVVZLElBQUlqQixFQUFPTixvQkFDaEMsRUFnQmF3QixFQUFtQixTQUFDbEIsR0FDZG1CLFNBQVNDLGlCQUFpQnBCLEVBQU9ULGNBQ3pDOEIsU0FBUSxTQUFDdkIsSUFoQk0sU0FBQ0EsRUFBUUUsR0FDakMsSUFBTVEsRUFBWWMsTUFBTUMsS0FBS3pCLEVBQU9zQixpQkFBaUJwQixFQUFPUixnQkFDdERnQyxFQUFnQjFCLEVBQU9HLGNBQWNELEVBQU9QLHVCQUVsRGMsRUFBa0JDLEVBQVdnQixFQUFleEIsR0FFNUNRLEVBQVVhLFNBQVEsU0FBQ0ksR0FDakJBLEVBQWFDLGlCQUFpQixTQUFTLFlBcENoQixTQUFDNUIsRUFBUUMsRUFBU0MsR0FDM0MyQixRQUFRQyxJQUFJN0IsRUFBUThCLG1CQUNmOUIsRUFBUWEsU0FBU0MsTUFHcEJoQixFQUFlQyxFQUFRQyxFQUFTQyxHQWpCYixTQUFDRixFQUFRQyxFQUFTK0IsRUFBVTlCLEdBQzlCRixFQUFPRyxjQUFjLElBQURDLE9BQUtILEVBQVFJLEdBQUUsV0FDM0NDLFlBQWMwQixFQUN6Qi9CLEVBQVFNLFVBQVVZLElBQUlqQixFQUFPTCxnQkFDL0IsQ0FXSW9DLENBQWVqQyxFQUFRQyxFQUFTQSxFQUFROEIsa0JBQW1CN0IsRUFJL0QsQ0E4Qk1nQyxDQUFtQmxDLEVBQVEyQixFQUFjekIsR0FDekNPLEVBQWtCQyxFQUFXZ0IsRUFBZXhCLEVBQzlDLEdBQ0YsR0FDRixDQUtJaUMsQ0FBa0JuQyxFQUFRRSxFQUM1QixHQUNGLEVBRU1rQyxFQUFrQixTQUFDcEMsRUFBUUUsR0FDYnNCLE1BQU1DLEtBQUt6QixFQUFPc0IsaUJBQWlCcEIsRUFBT1IsZ0JBQ2xENkIsU0FBUSxTQUFDVixHQUNqQmQsRUFBZUMsRUFBUWEsRUFBT1gsRUFDaEMsR0FDRixFLGtxQkFFQWtCLEVBQWlCNUIsRyxJQ1BqQixFQXZFUyxXQUlOLE8sRUFIRCxTQUFBNkMsRUFBQUMsR0FBa0MsSUFBcEJDLEVBQU9ELEVBQVBDLFFBQVNDLEVBQU9GLEVBQVBFLFMsNEZBQU9DLENBQUEsS0FBQUosR0FDNUJLLEtBQUtDLFNBQVdKLEVBQ2hCRyxLQUFLRSxTQUFXSixDQUNsQixHLEVBQUMsRUFBQUssSUFBQSxhQUFBQyxNQUVELFdBQ0UsT0FBT0MsUUFBUUMsSUFBSSxDQUFDTixLQUFLTyxjQUFlUCxLQUFLUSxtQkFDL0MsR0FBQyxDQUFBTCxJQUFBLGtCQUFBQyxNQUVELFdBQ0UsT0FBT0ssTUFBTSxHQUFEL0MsT0FBSXNDLEtBQUtDLFNBQVEsVUFBVSxDQUNyQ0gsUUFBU0UsS0FBS0UsV0FDYlEsS0FBS1YsS0FBS1csZUFDZixHQUFDLENBQUFSLElBQUEsY0FBQUMsTUFFRCxXQUNFLE9BQU9LLE1BQU0sR0FBRC9DLE9BQUlzQyxLQUFLQyxTQUFRLGFBQWEsQ0FDeENILFFBQVNFLEtBQUtFLFdBQ2JRLEtBQUtWLEtBQUtXLGVBQ2YsR0FBQyxDQUFBUixJQUFBLGVBQUFDLE1BRUQsU0FBWVEsR0FBa0IsSUFBZkMsRUFBSUQsRUFBSkMsS0FBTUMsRUFBS0YsRUFBTEUsTUFDbkIsT0FBT0wsTUFBTSxHQUFEL0MsT0FBSXNDLEtBQUtDLFNBQVEsYUFBYSxDQUN4Q2MsT0FBUSxRQUNSakIsUUFBU0UsS0FBS0UsU0FFZGMsS0FBTUMsS0FBS0MsVUFBVSxDQUNuQkwsS0FBQUEsRUFDQUMsTUFBQUEsTUFFREosS0FBS1YsS0FBS1csZUFDZixHQUFDLENBQUFSLElBQUEsZUFBQUMsTUFFRCxTQUFhZSxHQUNYLE9BQU9WLE1BQU0sR0FBRC9DLE9BQUlzQyxLQUFLQyxTQUFRLG9CQUFvQixDQUMvQ2MsT0FBUSxRQUNSakIsUUFBU0UsS0FBS0UsU0FDZGMsS0FBTUMsS0FBS0MsVUFBVUMsS0FDcEJULEtBQUtWLEtBQUtXLGVBQ2YsR0FBQyxDQUFBUixJQUFBLFVBQUFDLE1BRUQsU0FBUWUsR0FDTixPQUFPVixNQUFNLEdBQUQvQyxPQUFJc0MsS0FBS0MsU0FBUSxVQUFVLENBQ3JDYyxPQUFRLE9BQ1JqQixRQUFTRSxLQUFLRSxTQUNkYyxLQUFNQyxLQUFLQyxVQUFVQyxLQUNwQlQsS0FBS1YsS0FBS1csZUFDZixHQUFDLENBQUFSLElBQUEsYUFBQUMsTUFFRCxTQUFXekMsR0FDVCxPQUFPOEMsTUFBTSxHQUFEL0MsT0FBSXNDLEtBQUtDLFNBQVEsV0FBQXZDLE9BQVVDLEdBQU0sQ0FDM0NvRCxPQUFRLFNBQ1JqQixRQUFTRSxLQUFLRSxXQUNiUSxLQUFLVixLQUFLVyxlQUNmLEdBQUMsQ0FBQVIsSUFBQSxpQkFBQUMsTUFFRCxTQUFlZ0IsR0FDYixPQUFJQSxFQUFJQyxHQUNDRCxFQUFJRSxPQUVOakIsUUFBUWtCLE9BQU8sVUFBRDdELE9BQVcwRCxFQUFJSSxRQUN0QyxHQUFDLENBQUFyQixJQUFBLGFBQUFDLE1BRUQsU0FBV3pDLEVBQUk4RCxHQUNiLE9BQU9oQixNQUFNLEdBQUQvQyxPQUFJc0MsS0FBS0MsU0FBUSxXQUFBdkMsT0FBVUMsRUFBRSxVQUFVLENBQ2pEb0QsT0FBUVUsRUFBVSxTQUFXLE1BQzdCM0IsUUFBU0UsS0FBS0UsV0FDYlEsS0FBS1YsS0FBS1csZUFDZixNLDZFQUFDLENBckVNLEcsc0dDc0JULElBQU1lLEVBQW9CL0MsU0FBU2xCLGNBQWMsc0JBQzNDa0UsRUFBbUJoRCxTQUFTbEIsY0FBYyx3QkFDMUNtRSxFQUFjakQsU0FBU2xCLGNBQWMsa0JBQ3JDb0UsRUFBcUJsRCxTQUFTbEIsY0FBYyx5QkFJNUNxRSxHQURlbkQsU0FBU2xCLGNBQWMsa0JBQzFCa0IsU0FBU2xCLGNBQWMsaUJBQ25Dc0UsRUFBaUJwRCxTQUFTbEIsY0FBYyxxQkFHeEN1RSxFQUFZckQsU0FBU2xCLGNBQWMsZUFDbkN3RSxFQUFrQnRELFNBQVN1RCxNQUFtQixZQUM5Q0MsRUFBb0JILEVBQVV2RSxjQUFjLHFCQUM1QzJFLEVBQXFCSixFQUFVdkUsY0FBYyx1QkFDN0M0RSxFQUE0QkwsRUFBVXZFLGNBQzFDLDhCQUlJNkUsRUFBWTNELFNBQVNsQixjQUFjLG1CQUNuQzhFLEVBQVc1RCxTQUFTdUQsTUFBTSxpQkFDMUJNLEVBQW9CRixFQUFVN0UsY0FBYyxxQkFDNUNnRixFQUFnQkgsRUFBVTdFLGNBQWMsd0JBQ3hDaUYsRUFBZ0JKLEVBQVU3RSxjQUFjLHdCQUl4Q2tGLEdBSGdCTCxFQUFVN0UsY0FBYyw4QkFHekJrQixTQUFTbEIsY0FBYyxtQkFDdENtRixFQUEyQkQsRUFBYWxGLGNBQWMsaUJBQ3REb0YsRUFDSkYsRUFBYWxGLGNBQWMsbUJBQ3ZCcUYsRUFBdUJILEVBQWFsRixjQUFjLHFCQUdsRHNGLEVBQWNwRSxTQUFTbEIsY0FBYyxpQkFDckN1RixFQUFhckUsU0FBU3VELE1BQU0sZUFDNUJlLEVBQWlCRixFQUFZdEYsY0FBYyxxQkFFM0N5RixHQURrQkgsRUFBWXRGLGNBQWMsc0JBQ3RCc0YsRUFBWXRGLGNBQWMsc0JBR2hEMEYsRUFBY3hFLFNBQVNsQixjQUFjLGlCQUNyQzJGLEVBQXNCRCxFQUFZMUYsY0FBYyxxQkFDaEQ0RixFQUFzQkYsRUFBWTFGLGNBQWMsc0JBQ2hENkYsRUFBcUJILEVBQVkxRixjQUNyQyxrQ0FFSThGLEVBQWE1RSxTQUFTbEIsY0FBYyxnQkFHMUNrQixTQUFTTyxpQkFBaUIsb0JBQW9CLFdBQzVDUCxTQUFTbEIsY0FBYyxpQkFBaUIrRixJQUFNQyxFQUM5QzlFLFNBQVNsQixjQUFjLG9CQUFvQitGLElBQU1FLEVBQ2pEL0UsU0FBU2xCLGNBQWMsMEJBQTBCK0YsSUFBTUcsRUFDdkRoRixTQUFTbEIsY0FBYyx5QkFBeUIrRixJQUFNSSxFQUN0RGpGLFNBQVNsQixjQUFjLHlCQUF5QitGLElBQU1LLENBQ3hELElBRUEsSUFzRklDLEVBQ0FDLEVBNURFQyxFQUFNLElBQUlyRSxFQUFJLENBQ2xCRSxRQUFTLGtEQUNUQyxRQUFTLENBQ1BtRSxjQUFlLHVDQUNmLGVBQWdCLHNCQTBEcEIsU0FBU0MsRUFBcUJDLEVBQVFDLEVBQVdDLEVBQWFDLEdBQzVESCxFQUFPNUYsU0FBVzZGLEVBQ2xCRCxFQUFPdEcsVUFBVTBHLE9BQU8sNEJBQTZCSCxHQUNyREQsRUFBT3ZHLFlBQWN3RyxFQUFZQyxFQUFjQyxDQUNqRCxDQUVBLFNBQVNFLEVBQWVDLEdBQ3RCLElBQ01DLEVBRGUvRixTQUFTbEIsY0FBYyxrQkFBa0JrSCxRQUM3QmxILGNBQWMsU0FBU21ILFdBQVUsR0FHbEVGLEVBQVkvRyxHQUFLLFFBQUhELE9BQVcrRyxFQUFTSSxLQUVsQyxJQUFNQyxFQUFZSixFQUFZakgsY0FBYyxnQkFDdENzSCxFQUFZTCxFQUFZakgsY0FBYyxnQkFDdEN1SCxFQUFpQk4sRUFBWWpILGNBQWMsbUJBQzNDd0gsRUFBZVAsRUFBWWpILGNBQWMscUJBMkIvQyxPQXpCQXFILEVBQVV0QixJQUFNaUIsRUFBU1MsS0FDekJKLEVBQVVLLElBQU1WLEVBQVM1RCxLQUN6QmtFLEVBQVVuSCxZQUFjNkcsRUFBUzVELEtBRWpDb0UsRUFBYS9GLGlCQUFpQixTQUFTLFlBd0p6QyxTQUEwQndGLEVBQWF2RCxHQUNyQzJDLEVBQWVZLEVBQ2ZYLEVBQWlCNUMsRUFBSzBELElBQ3RCTyxFQUFVakMsRUFDWixDQTNKSWtDLENBQWlCWCxFQUFhRCxFQUNoQyxJQUdJQSxFQUFTaEQsU0FDWHVELEVBQWVuSCxVQUFVWSxJQUFJLHdCQUkvQnFHLEVBQVU1RixpQkFBaUIsU0FBUyxXQUNsQzBELEVBQXlCWSxJQUFNaUIsRUFBU1MsS0FDeEN0QyxFQUF5QnVDLElBQU1WLEVBQVM1RCxLQUN4Q2dDLEVBQTJCakYsWUFBYzZHLEVBQVM1RCxLQUNsRHVFLEVBQVV6QyxFQUNaLElBR0FxQyxFQUFlOUYsaUJBQWlCLFNBQVMsV0FrSzNDLElBQXlCb0csRUFBUUMsRUFFekI5RCxFQUZpQjZELEVBaktMYixFQUFTSSxJQW1LckJwRCxHQUZ5QjhELEVBaktDUCxHQW1LTG5ILFVBQVUySCxTQUFTLHdCQUU5Q3hCLEVBQ0d5QixXQUFXSCxFQUFRN0QsR0FDbkJmLE1BQUssU0FBQ2dGLEdBQ0RBLEVBQVlqRSxRQUNkOEQsRUFBVzFILFVBQVVZLElBQUksd0JBRXpCOEcsRUFBVzFILFVBQVVDLE9BQU8sdUJBRWhDLElBQUUsT0FDSyxTQUFDNkgsR0FDTnhHLFFBQVF5RyxNQUFNLDhCQUErQkQsRUFDL0MsR0EvS0YsSUFDT2pCLENBQ1QsQ0FjQSxTQUFTVSxFQUFVUyxHQUNqQkEsRUFBTWhJLFVBQVVZLElBQUksZ0JBQ3BCRSxTQUFTTyxpQkFBaUIsVUFBVzRHLEVBQ3ZDLENBNkRBLFNBQVNDLEVBQVdGLEdBQ2xCQSxFQUFNaEksVUFBVUMsT0FBTyxnQkFDdkJhLFNBQVNxSCxvQkFBb0IsVUFBV0YsRUFDMUMsQ0FFQSxTQUFTQSxFQUFnQkcsR0FDdkIsR0FBZ0IsV0FBWkEsRUFBSTlGLElBQWtCLENBQ3hCLElBQU1pRixFQUFZekcsU0FBU2xCLGNBQWMsaUJBQ3JDMkgsR0FDRlcsRUFBV1gsRUFFZixDQUNGLENBNUxBcEIsRUFDR2tDLGFBQ0F4RixNQUFLLFNBQUFkLEdBQXVCLEksSUFBQWdCLEcsRUFBQSxFLDRDQUFBaEIsSSxzMUJBQXJCdUcsRUFBUXZGLEVBQUEsR0FBRXdGLEVBQUt4RixFQUFBLEdBQ3JCekIsUUFBUUMsSUFBSWdILEdBQ1pBLEVBQU12SCxTQUFRLFNBQUN3SCxHQUNiLElBQU0zQixFQUFjRixFQUFlNkIsR0FDbkN2RSxFQUFVd0UsT0FBTzVCLEVBQ25CLElBRUEvRixTQUFTbEIsY0FBYyxvQkFBb0IrRixJQUFNMkMsRUFBU3pDLE9BQzFEOUIsRUFBWWhFLFlBQWN1SSxFQUFTdEYsS0FDbkNnQixFQUFtQmpFLFlBQWN1SSxFQUFTckYsS0FDNUMsSUFBRSxNQUNLM0IsUUFBUXlHLE9BSWpCeEMsRUFBb0JsRSxpQkFBaUIsU0FBUyxXQUM1QzZHLEVBQVc1QyxFQUNiLElBRUFHLEVBQW1CcEUsaUJBQWlCLFNBQVMsV0FDM0M2RyxFQUFXNUMsRUFDYixJQUVBRSxFQUFvQm5FLGlCQUFpQixTQUFTLFdBQzVDLElBQU13RixFQUFjL0YsU0FBUzRILGVBQWVwRCxFQUFZcUQsUUFBUUMsY0FJaEUsR0FIQXRILFFBQVFDLElBQUksa0JBQW1CK0QsRUFBWXFELFFBQVFDLGNBQ25EdEgsUUFBUUMsSUFBSSxzQkFBdUJzRixHQUU5QkEsRUFBTCxDQUVBLElBQU1ZLEVBQVNuQyxFQUFZcUQsUUFBUUMsYUFBYUMsUUFBUSxRQUFTLElBQ2pFdkgsUUFBUUMsSUFBSSwwQkFBMkJrRyxHQUV2Q3RCLEVBQ0cyQyxXQUFXckIsR0FDWDVFLE1BQUssV0FDSmdFLEVBQVk1RyxTQUNaaUksRUFBVzVDLEVBQ2IsSUFBRSxPQUNLLFNBQUN3QyxHQUNOeEcsUUFBUXlHLE1BQU0sdUJBQXdCRCxFQUN4QyxHQWJzQixDQWMxQixJQUdBN0MsRUFBcUI1RCxpQkFBaUIsU0FBUyxXQUM3QzZHLEVBQVdwRCxFQUNiLElBb0RBaEIsRUFBaUJ6QyxpQkFBaUIsU0FBUyxXQUN6Q1EsRUFBZ0JzRCxFQUFZbEcsR0FDNUJzSSxFQUFVckMsRUFDWixJQUdBRyxFQUFvQmhFLGlCQUFpQixTQUFTLGtCQUFNNkcsRUFBV2hELEVBQVksSUFHM0VDLEVBQVc5RCxpQkFBaUIsVUFRNUIsU0FBNEIrRyxHQUMxQkEsRUFBSVcsaUJBQ0osSUFBTUMsRUFBZTdELEVBQVd2RixjQUFjLHNCQUN4Q3FKLEVBQVluSSxTQUFTbEIsY0FBYyxvQkFFekN5RyxFQUFxQjJDLEdBQWMsRUFBTSxZQUFhLFFBRXREN0MsRUFDRytDLGFBQWEsQ0FBRXJELE9BQVFULEVBQWU3QyxRQUN0Q00sTUFBSyxTQUFDeUYsR0FDTFcsRUFBVXRELElBQU0sR0FBSDlGLE9BQU15SSxFQUFTekMsT0FBTSxPQUFBaEcsT0FBTXNKLEtBQUtDLE9BQzdDakUsRUFBV2tFLFFBQ1huQixFQUFXaEQsR0FDWHJELEVBQWdCc0QsRUFBWWxHLEdBRTVCMEIsRUFBY3FJLEVBQWMvSixFQUM5QixJQUFFLE9BQ0ssU0FBQzZJLEdBQ054RyxRQUFReUcsTUFBTSx3QkFBeUJELEdBQ3ZDd0IsTUFBTSw2Q0FDUixJQUFFLFNBQ08sV0FDUGpELEVBQXFCMkMsR0FBYyxFQUFPLFlBQWEsUUFFdkRySSxFQUFjcUksRUFBYy9KLEVBQzlCLEdBQ0osSUE4Q0E2QixTQUFTQyxpQkFBaUIsVUFBVUMsU0FBUSxTQUFDZ0gsR0FDM0NBLEVBQU0zRyxpQkFBaUIsU0FBUyxTQUFDK0csR0FDM0JBLEVBQUltQixTQUFXdkIsR0FDakJFLEVBQVdGLEVBRWYsR0FDRixJQTBEQXRDLEVBQVdyRSxpQkFBaUIsVUFyQjVCLFNBQTRCK0csR0FDMUJBLEVBQUlXLGlCQUVKMUMsRUFBcUJiLEdBQXFCLEVBQU0sY0FBZSxVQUUvRFcsRUFDRzJDLFdBQVc1QyxHQUNYckQsTUFBSyxXQUNKb0QsRUFBYWhHLFNBQ2JpSSxFQUFXNUMsR0FDWFcsRUFBZSxLQUNmQyxFQUFpQixJQUNuQixJQUFFLE9BQ0ssU0FBQzRCLEdBQ054RyxRQUFReUcsTUFBTSx1QkFBd0JELEVBQ3hDLElBQUUsU0FDTyxXQUNQekIsRUFBcUJiLEdBQXFCLEVBQU8sU0FBVSxTQUM3RCxHQUNKLElBc0JBM0IsRUFBa0J4QyxpQkFBaUIsU0FBUyxXQUMxQ2tELEVBQW1CaEMsTUFBUXdCLEVBQVloRSxZQUN2Q3lFLEVBQTBCakMsTUFBUXlCLEVBQW1CakUsWUFFckQ4QixFQUFnQnVDLEVBQWlCbkYsR0FDakNzSSxFQUFVcEQsRUFDWixJQUVBRyxFQUFrQmpELGlCQUFpQixTQUFTLFdBQzFDNkcsRUFBVy9ELEVBQ2IsSUFFQUQsRUFBZTdDLGlCQUFpQixTQUFTLFdBQ3ZDa0csRUFBVTlDLEVBQ1osSUFFQUUsRUFBa0J0RCxpQkFBaUIsU0FBUyxXQUMxQzZHLEVBQVd6RCxFQUNiLElBRUFMLEVBQWdCL0MsaUJBQWlCLFVBaEdqQyxTQUE4QitHLEdBQzVCQSxFQUFJVyxpQkFDSixJQUFNQyxFQUFlNUUsRUFBZ0J4RSxjQUFjLHNCQUVuRHlHLEVBQXFCMkMsR0FBYyxFQUFNLFlBQWEsUUFFdEQ3QyxFQUNHcUQsYUFBYSxDQUNaeEcsS0FBTXVCLEVBQW1CaEMsTUFDekJVLE1BQU91QixFQUEwQmpDLFFBRWxDTSxNQUFLLFNBQUNTLEdBQ0xTLEVBQVloRSxZQUFjdUQsRUFBS04sS0FDL0JnQixFQUFtQmpFLFlBQWN1RCxFQUFLTCxNQUN0Q21CLEVBQWdCaUYsUUFDaEJuQixFQUFXL0QsR0FDWHRDLEVBQWdCdUMsRUFBaUJuRixHQUVqQzBCLEVBQWNxSSxFQUFjL0osRUFDOUIsSUFBRSxPQUNLLFNBQUM2SSxHQUNOeEcsUUFBUXlHLE1BQU0seUJBQTBCRCxHQUN4Q3dCLE1BQU0sOENBQ1IsSUFBRSxTQUNPLFdBQ1BqRCxFQUFxQjJDLEdBQWMsRUFBTyxZQUFhLFFBQ3ZEckksRUFBY3FJLEVBQWMvSixFQUM5QixHQUNKLElBcUVBeUYsRUFBU3JELGlCQUFpQixVQXJKMUIsU0FBNkIrRyxHQUMzQkEsRUFBSVcsaUJBQ0osSUFBTUMsRUFBZXRFLEVBQVM5RSxjQUFjLHNCQUU1Q3lHLEVBQXFCMkMsR0FBYyxFQUFNLGNBQWUsVUFFeEQ3QyxFQUNHc0QsUUFBUSxDQUNQekcsS0FBTTRCLEVBQWNyQyxNQUNwQjhFLEtBQU14QyxFQUFjdEMsUUFFckJNLE1BQUssU0FBQytELEdBQ0wsSUFBTUMsRUFBY0YsRUFBZUMsR0FDbkMzQyxFQUFVeUYsUUFBUTdDLEdBQ2xCbkMsRUFBUzJFLFFBQ1RuQixFQUFXekQsR0FDWDVDLEVBQWdCNkMsRUFBVXpGLEdBRTFCMEIsRUFBY3FJLEVBQWMvSixFQUM5QixJQUFFLE9BQ0ssU0FBQzZJLEdBQ054RyxRQUFReUcsTUFBTSxzQkFBdUJELEdBQ3JDd0IsTUFBTSx3Q0FDUixJQUFFLFNBQ08sV0FDUGpELEVBQXFCMkMsR0FBYyxFQUFPLGNBQWUsVUFDekRySSxFQUFjcUksRUFBYy9KLEVBQzlCLEdBQ0osSUEySEE0QixFQUFpQjVCLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy91dGlscy9BcGkuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvc2VfcHJvamVjdF9zcG90cy9cIjsiLCJleHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1YmJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3N1Ym1pdC1idG5cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc3VibWl0LWJ0bl9pbnZhbGlkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5jb25zdCBzaG93SW5wdXRFcnJvciA9IChmb3JtRWwsIGlucHV0RWwsIGVycm9yTXNnLCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JNc2dFbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICBlcnJvck1zZ0VsLnRleHRDb250ZW50ID0gZXJyb3JNc2c7XG4gIGlucHV0RWwuY2xhc3NMaXN0LmFkZChjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbn07XG5cbmNvbnN0IGhpZGVJbnB1dEVycm9yID0gKGZvcm1FbCwgaW5wdXRFbCwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yTXNnRWwgPSBmb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgZXJyb3JNc2dFbC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbn07XG5cbmNvbnN0IGNoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWwsIGlucHV0RWwsIGNvbmZpZykgPT4ge1xuICBjb25zb2xlLmxvZyhpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgc2hvd0lucHV0RXJyb3IoZm9ybUVsLCBpbnB1dEVsLCBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlLCBjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXRFbCwgY29uZmlnKTtcbiAgfVxufTtcblxuY29uc3QgaGFzSW52YWxpZElucHV0ID0gKGlucHV0TGlzdCkgPT4ge1xuICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiB7XG4gICAgcmV0dXJuICFpbnB1dC52YWxpZGl0eS52YWxpZDtcbiAgfSk7XG59O1xuXG5jb25zdCB0b2dnbGVCdXR0b25TdGF0ZSA9IChpbnB1dExpc3QsIGJ1dHRvbkVsLCBjb25maWcpID0+IHtcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgZGlzYWJsZUJ1dHRvbihidXR0b25FbCwgY29uZmlnKTtcbiAgfSBlbHNlIHtcbiAgICBidXR0b25FbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIGJ1dHRvbkVsLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICB9XG59O1xuXG5jb25zdCBkaXNhYmxlQnV0dG9uID0gKGJ1dHRvbkVsLCBjb25maWcpID0+IHtcbiAgYnV0dG9uRWwuZGlzYWJsZWQgPSB0cnVlO1xuICBidXR0b25FbC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbn07XG5cbmNvbnN0IHNldEV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbCwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcbiAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcblxuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsLCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsKSA9PiB7XG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsLCBjb25maWcpO1xuICB9KTtcbn07XG5cbmNvbnN0IHJlc2V0VmFsaWRhdGlvbiA9IChmb3JtRWwsIGNvbmZpZykgPT4ge1xuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXQsIGNvbmZpZyk7XG4gIH0pO1xufTtcbmV4cG9ydCB7IGRpc2FibGVCdXR0b24sIHJlc2V0VmFsaWRhdGlvbiB9O1xuZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncyk7XG4iLCJjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICB9XG5cbiAgZ2V0QXBwSW5mbygpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0VXNlckluZm8oKSwgdGhpcy5nZXRJbml0aWFsQ2FyZHMoKV0pO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGVkaXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG5cbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgdXBkYXRlQXZhdGFyKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGFkZENhcmQoZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgbGlrZVN0YXR1cyhpZCwgaXNMaWtlZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogaXNMaWtlZCA/IFwiREVMRVRFXCIgOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG59XG5leHBvcnQgZGVmYXVsdCBBcGk7XG4iLCJpbXBvcnQgbG9nbyBmcm9tIFwiLi4vaW1hZ2VzL2xvZ28uc3ZnXCI7XG5pbXBvcnQgYXZhdGFyIGZyb20gXCIuLi9pbWFnZXMvYXZhdGFyLmpwZ1wiO1xuaW1wb3J0IHBlbmNpbCBmcm9tIFwiLi4vaW1hZ2VzL3BlbmNpbC5zdmdcIjtcbmltcG9ydCBwbHVzIGZyb20gXCIuLi9pbWFnZXMvcGx1cy5zdmdcIjtcbmltcG9ydCBwZW5jaWxFZGl0QXZhdGFyIGZyb20gXCIuLi9pbWFnZXMvcGVuY2lsLWVkaXQtYXZhdGFyLnN2Z1wiO1xuaW1wb3J0IGNsb3NlSWNvbiBmcm9tIFwiLi4vaW1hZ2VzL2Nsb3NlLWljb24tbGlnaHQuc3ZnXCI7XG5cbi8vIEltcG9ydCBDU1NcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5cbi8vIEltcG9ydCBTY3JpcHRzXG5pbXBvcnQge1xuICBlbmFibGVWYWxpZGF0aW9uLFxuICBzZXR0aW5ncyxcbiAgZGlzYWJsZUJ1dHRvbixcbiAgcmVzZXRWYWxpZGF0aW9uLFxufSBmcm9tIFwiLi4vc2NyaXB0cy92YWxpZGF0aW9uLmpzXCI7XG5cbi8vIEltcG9ydCBBUElcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3V0aWxzL0FwaS5qc1wiO1xuXG4vLyBQcm9maWxlIEVsZW1lbnRzXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idG5cIik7XG5jb25zdCBwcm9maWxlQXZhdGFyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItYnRuXCIpO1xuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuXG4vLyBDYXJkIEVsZW1lbnRzXG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIik7XG5jb25zdCBjYXJkc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuY29uc3QgY2FyZEVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idG5cIik7XG5cbi8vIEVkaXQgUHJvZmlsZSBNb2RhbCBFbGVtZW50c1xuY29uc3QgZWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LW1vZGFsXCIpO1xuY29uc3QgZWRpdEZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZm9ybXNbXCJtb2RhbF9fZm9ybVwiXTtcbmNvbnN0IGVkaXRNb2RhbENsb3NlQnRuID0gZWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcbmNvbnN0IGVkaXRNb2RhbE5hbWVJbnB1dCA9IGVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtbmFtZS1pbnB1dFwiKTtcbmNvbnN0IGVkaXRNb2RhbERlc2NyaXB0aW9uSW5wdXQgPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXG4pO1xuXG4vLyBBZGQgQ2FyZCBNb2RhbCBFbGVtZW50c1xuY29uc3QgY2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcbmNvbnN0IGNhcmRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJhZGQtY2FyZC1mb3JtXCJdO1xuY29uc3QgY2FyZE1vZGFsQ2xvc2VCdG4gPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuY29uc3QgY2FyZE5hbWVJbnB1dCA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW5hbWUtaW5wdXRcIik7XG5jb25zdCBjYXJkTGlua0lucHV0ID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbGluay1pbnB1dFwiKTtcbmNvbnN0IGNhcmRTdWJtaXRCdG4gPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ0bl9pbnZhbGlkXCIpO1xuXG4vLyBQcmV2aWV3IE1vZGFsIEVsZW1lbnRzXG5jb25zdCBwcmV2aWV3TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctbW9kYWxcIik7XG5jb25zdCBwcmV2aWV3TW9kYWxJbWFnZUVsZW1lbnQgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG5jb25zdCBwcmV2aWV3TW9kYWxDYXB0aW9uRWxlbWVudCA9XG4gIHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xuY29uc3QgcHJldmlld01vZGFsQ2xvc2VCdG4gPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuXG4vLyBBdmF0YXIgTW9kYWwgRWxlbWVudHNcbmNvbnN0IGF2YXRhck1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItbW9kYWxcIik7XG5jb25zdCBhdmF0YXJGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJlZGl0LWF2YXRhclwiXTtcbmNvbnN0IGF2YXRhclVybElucHV0ID0gYXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItdXJsLWlucHV0XCIpO1xuY29uc3QgYXZhdGFyU3VibWl0QnRuID0gYXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ0blwiKTtcbmNvbnN0IGF2YXRhck1vZGFsQ2xvc2VCdG4gPSBhdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XG5cbi8vIERlbGV0ZSBNb2RhbCBFbGVtZW50c1xuY29uc3QgZGVsZXRlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1tb2RhbFwiKTtcbmNvbnN0IGRlbGV0ZU1vZGFsQ2xvc2VCdG4gPSBkZWxldGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XG5jb25zdCBjb25maXJtRGVsZXRlQnV0dG9uID0gZGVsZXRlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ0blwiKTtcbmNvbnN0IGNhbmNlbERlbGV0ZUJ1dHRvbiA9IGRlbGV0ZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19zdWJtaXQtYnRuX3R5cGVfY2FuY2VsXCJcbik7XG5jb25zdCBkZWxldGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZWxldGUtZm9ybVwiKTtcblxuLy8gRE9NQ29udGVudExvYWRlZCBldmVudCBsaXN0ZW5lclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fbG9nb1wiKS5zcmMgPSBsb2dvO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKS5zcmMgPSBhdmF0YXI7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idG4gaW1nXCIpLnNyYyA9IHBlbmNpbDtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnRuIGltZ1wiKS5zcmMgPSBwbHVzO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3BlbmNpbC1pY29uXCIpLnNyYyA9IHBlbmNpbEVkaXRBdmF0YXI7XG59KTtcblxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJWYWwgVGhvcmVuc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NzYwOTA2Mzk0NzctNzc5ODNiNzJkZTZmP3E9ODAmdz0zMDI0JmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJSZXN0YXVyYW50IHRlcnJhY2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcGx1cy51bnNwbGFzaC5jb20vcHJlbWl1bV9waG90by0xNzIzNDkxMjg1ODU1LWYxMDM1YzRjNzAzYz9xPTgwJnc9MzU0MCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQW4gb3V0ZG9vciBjYWZlXCIsXG4gICAgbGluazogXCJodHRwczovL3BsdXMudW5zcGxhc2guY29tL3ByZW1pdW1fcGhvdG8tMTY2NDI4Njc3NDIwMy1iYjQ5NjgyZjQxYjE/cT04MCZ3PTM1MzgmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkEgdmVyeSBsb25nIGJyaWRnZSwgb3ZlciB0aGUgZm9yZXN0XCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTQ3NjIzMTY4MjgyOC0zN2U1NzFiYzE3MmY/cT04MCZ3PTM0NzQmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlR1bm5lbCB3aXRoIG1vcm5pZyBsaWdodFwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wbHVzLnVuc3BsYXNoLmNvbS9wcmVtaXVtX3Bob3RvLTE2NzM1MTUyNDMxMjAtZmQzNjkxZGI1NzU0P3E9ODAmdz0zNTQwJmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJNb3VudGFpbiBob3VzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2NDYwNzAwNzgzODgtNGE1NjZkZTc0ODRkP3E9ODAmdz0yNzY1JmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxuICB9LFxuXTtcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiYTFhNzM2MTEtODNiZC00OWVlLTlhMmQtYWRhYzkwOTlkZjM0XCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxuYXBpXG4gIC5nZXRBcHBJbmZvKClcbiAgLnRoZW4oKFt1c2VyRGF0YSwgY2FyZHNdKSA9PiB7XG4gICAgY29uc29sZS5sb2coY2FyZHMpO1xuICAgIGNhcmRzLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoaXRlbSk7XG4gICAgICBjYXJkc0xpc3QuYXBwZW5kKGNhcmRFbGVtZW50KTtcbiAgICB9KTtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyXCIpLnNyYyA9IHVzZXJEYXRhLmF2YXRhcjtcbiAgICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IHVzZXJEYXRhLm5hbWU7XG4gICAgcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdXNlckRhdGEuYWJvdXQ7XG4gIH0pXG4gIC5jYXRjaChjb25zb2xlLmVycm9yKTtcblxuLy8gZGVsZXRlIG1vZGFsIGNvbmZpcm1hdGlvblxuXG5kZWxldGVNb2RhbENsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlTW9kYWwoZGVsZXRlTW9kYWwpO1xufSk7XG5cbmNhbmNlbERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbG9zZU1vZGFsKGRlbGV0ZU1vZGFsKTtcbn0pO1xuXG5jb25maXJtRGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVsZXRlTW9kYWwuZGF0YXNldC5jYXJkVG9EZWxldGUpO1xuICBjb25zb2xlLmxvZyhcIkNhcmQgdG8gZGVsZXRlOlwiLCBkZWxldGVNb2RhbC5kYXRhc2V0LmNhcmRUb0RlbGV0ZSk7XG4gIGNvbnNvbGUubG9nKFwiQ2FyZCBlbGVtZW50IGZvdW5kOlwiLCBjYXJkRWxlbWVudCk7XG5cbiAgaWYgKCFjYXJkRWxlbWVudCkgcmV0dXJuO1xuXG4gIGNvbnN0IGNhcmRJZCA9IGRlbGV0ZU1vZGFsLmRhdGFzZXQuY2FyZFRvRGVsZXRlLnJlcGxhY2UoXCJjYXJkLVwiLCBcIlwiKTtcbiAgY29uc29sZS5sb2coXCJDYXJkIElEIHRvIHNlbmQgdG8gQVBJOlwiLCBjYXJkSWQpO1xuXG4gIGFwaVxuICAgIC5kZWxldGVDYXJkKGNhcmRJZClcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBjYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgIGNsb3NlTW9kYWwoZGVsZXRlTW9kYWwpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkZWxldGluZyBjYXJkOlwiLCBlcnIpO1xuICAgIH0pO1xufSk7XG4vLyBFbmRcblxucHJldmlld01vZGFsQ2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VNb2RhbChwcmV2aWV3TW9kYWwpO1xufSk7XG5cbmxldCBzZWxlY3RlZENhcmQ7XG5sZXQgc2VsZWN0ZWRDYXJkSWQ7XG5cbmZ1bmN0aW9uIHNldFN1Ym1pdEJ1dHRvblN0YXRlKGJ1dHRvbiwgaXNMb2FkaW5nLCBsb2FkaW5nVGV4dCwgZGVmYXVsdFRleHQpIHtcbiAgYnV0dG9uLmRpc2FibGVkID0gaXNMb2FkaW5nO1xuICBidXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcIm1vZGFsX19zdWJtaXQtYnRuX2xvYWRpbmdcIiwgaXNMb2FkaW5nKTtcbiAgYnV0dG9uLnRleHRDb250ZW50ID0gaXNMb2FkaW5nID8gbG9hZGluZ1RleHQgOiBkZWZhdWx0VGV4dDtcbn1cblxuZnVuY3Rpb24gZ2V0Q2FyZEVsZW1lbnQoY2FyZERhdGEpIHtcbiAgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpLmNvbnRlbnQ7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKS5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgLy8gQWRkIGEgdW5pcXVlIElEIHRvIHRoZSBjYXJkXG4gIGNhcmRFbGVtZW50LmlkID0gYGNhcmQtJHtjYXJkRGF0YS5faWR9YDtcblxuICBjb25zdCBjYXJkSW1hZ2UgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICBjb25zdCBjYXJkVGl0bGUgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICBjb25zdCBjYXJkTGlrZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idG5cIik7XG4gIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ0blwiKTtcblxuICBjYXJkSW1hZ2Uuc3JjID0gY2FyZERhdGEubGluaztcbiAgY2FyZEltYWdlLmFsdCA9IGNhcmREYXRhLm5hbWU7XG4gIGNhcmRUaXRsZS50ZXh0Q29udGVudCA9IGNhcmREYXRhLm5hbWU7XG5cbiAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgaGFuZGxlRGVsZXRlQ2FyZChjYXJkRWxlbWVudCwgY2FyZERhdGEpO1xuICB9KTtcblxuICAvLyBTZXQgaW5pdGlhbCBsaWtlIHN0YXRlXG4gIGlmIChjYXJkRGF0YS5pc0xpa2VkKSB7XG4gICAgY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnRuX2xpa2VkXCIpO1xuICB9XG5cbiAgLy8gT3BlbiB0aGUgY2FyZCBwcmV2aWV3XG4gIGNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIHByZXZpZXdNb2RhbEltYWdlRWxlbWVudC5zcmMgPSBjYXJkRGF0YS5saW5rO1xuICAgIHByZXZpZXdNb2RhbEltYWdlRWxlbWVudC5hbHQgPSBjYXJkRGF0YS5uYW1lO1xuICAgIHByZXZpZXdNb2RhbENhcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gY2FyZERhdGEubmFtZTtcbiAgICBvcGVuTW9kYWwocHJldmlld01vZGFsKTtcbiAgfSk7XG5cbiAgLy8gQWRkIGNsaWNrIGV2ZW50IGxpc3RlbmVyIGZvciBsaWtlIGJ1dHRvblxuICBjYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGhhbmRsZUxpa2VDbGljayhjYXJkRGF0YS5faWQsIGNhcmRMaWtlQnV0dG9uKTtcbiAgfSk7XG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxuLy8gT3BlbiBBdmF0YXIgTW9kYWxcbnByb2ZpbGVBdmF0YXJCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcmVzZXRWYWxpZGF0aW9uKGF2YXRhckZvcm0sIHNldHRpbmdzKTtcbiAgb3Blbk1vZGFsKGF2YXRhck1vZGFsKTtcbn0pO1xuXG4vLyBDbG9zZSBBdmF0YXIgTW9kYWxcbmF2YXRhck1vZGFsQ2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGNsb3NlTW9kYWwoYXZhdGFyTW9kYWwpKTtcblxuLy8gQXZhdGFyIEZvcm0gU3VibWlzc2lvblxuYXZhdGFyRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUF2YXRhclN1Ym1pdCk7XG5cbmZ1bmN0aW9uIG9wZW5Nb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NhcGVLZXkpO1xufVxuLy8gSGFuZGxlIGF2YXRhciB1cGRhdGUgc3VibWlzc2lvblxuLy8gQXZhdGFyIHN1Ym1pc3Npb24gaGFuZGxlclxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3Qgc3VibWl0QnV0dG9uID0gYXZhdGFyRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zdWJtaXQtYnRuXCIpO1xuICBjb25zdCBhdmF0YXJJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKTtcblxuICBzZXRTdWJtaXRCdXR0b25TdGF0ZShzdWJtaXRCdXR0b24sIHRydWUsIFwiU2F2aW5nLi4uXCIsIFwiU2F2ZVwiKTtcblxuICBhcGlcbiAgICAudXBkYXRlQXZhdGFyKHsgYXZhdGFyOiBhdmF0YXJVcmxJbnB1dC52YWx1ZSB9KVxuICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xuICAgICAgYXZhdGFySW1nLnNyYyA9IGAke3VzZXJEYXRhLmF2YXRhcn0/dD0ke0RhdGUubm93KCl9YDtcbiAgICAgIGF2YXRhckZvcm0ucmVzZXQoKTtcbiAgICAgIGNsb3NlTW9kYWwoYXZhdGFyTW9kYWwpO1xuICAgICAgcmVzZXRWYWxpZGF0aW9uKGF2YXRhckZvcm0sIHNldHRpbmdzKTtcbiAgICAgIC8vIERpc2FibGUgdGhlIGJ1dHRvbiBhZnRlciBzdWNjZXNzZnVsIHN1Ym1pc3Npb25cbiAgICAgIGRpc2FibGVCdXR0b24oc3VibWl0QnV0dG9uLCBzZXR0aW5ncyk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihcIkF2YXRhciB1cGRhdGUgZmFpbGVkOlwiLCBlcnIpO1xuICAgICAgYWxlcnQoXCJGYWlsZWQgdG8gdXBkYXRlIGF2YXRhci4gUGxlYXNlIHRyeSBhZ2Fpbi5cIik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBzZXRTdWJtaXRCdXR0b25TdGF0ZShzdWJtaXRCdXR0b24sIGZhbHNlLCBcIlNhdmluZy4uLlwiLCBcIlNhdmVcIik7XG4gICAgICAvLyBNYWtlIHN1cmUgdGhlIGJ1dHRvbiBzdGF5cyBkaXNhYmxlZCBldmVuIGFmdGVyIHRoZSBsb2FkaW5nIHN0YXRlIGlzIHJlbW92ZWRcbiAgICAgIGRpc2FibGVCdXR0b24oc3VibWl0QnV0dG9uLCBzZXR0aW5ncyk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRTdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBzdWJtaXRCdXR0b24gPSBjYXJkRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zdWJtaXQtYnRuXCIpO1xuXG4gIHNldFN1Ym1pdEJ1dHRvblN0YXRlKHN1Ym1pdEJ1dHRvbiwgdHJ1ZSwgXCJDcmVhdGluZy4uLlwiLCBcIkNyZWF0ZVwiKTtcblxuICBhcGlcbiAgICAuYWRkQ2FyZCh7XG4gICAgICBuYW1lOiBjYXJkTmFtZUlucHV0LnZhbHVlLFxuICAgICAgbGluazogY2FyZExpbmtJbnB1dC52YWx1ZSxcbiAgICB9KVxuICAgIC50aGVuKChjYXJkRGF0YSkgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChjYXJkRGF0YSk7XG4gICAgICBjYXJkc0xpc3QucHJlcGVuZChjYXJkRWxlbWVudCk7XG4gICAgICBjYXJkRm9ybS5yZXNldCgpO1xuICAgICAgY2xvc2VNb2RhbChjYXJkTW9kYWwpO1xuICAgICAgcmVzZXRWYWxpZGF0aW9uKGNhcmRGb3JtLCBzZXR0aW5ncyk7XG4gICAgICAvLyBEaXNhYmxlIHRoZSBidXR0b24gYWZ0ZXIgc3VjY2Vzc2Z1bCBzdWJtaXNzaW9uXG4gICAgICBkaXNhYmxlQnV0dG9uKHN1Ym1pdEJ1dHRvbiwgc2V0dGluZ3MpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gYWRkIGNhcmQ6XCIsIGVycik7XG4gICAgICBhbGVydChcIkZhaWxlZCB0byBhZGQgY2FyZC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBzZXRTdWJtaXRCdXR0b25TdGF0ZShzdWJtaXRCdXR0b24sIGZhbHNlLCBcIkNyZWF0aW5nLi4uXCIsIFwiQ3JlYXRlXCIpO1xuICAgICAgZGlzYWJsZUJ1dHRvbihzdWJtaXRCdXR0b24sIHNldHRpbmdzKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY2xvc2VNb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NhcGVLZXkpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVFc2NhcGVLZXkoZXZ0KSB7XG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgY29uc3Qgb3Blbk1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9vcGVuZWRcIik7XG4gICAgaWYgKG9wZW5Nb2RhbCkge1xuICAgICAgY2xvc2VNb2RhbChvcGVuTW9kYWwpO1xuICAgIH1cbiAgfVxufVxuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsXCIpLmZvckVhY2goKG1vZGFsKSA9PiB7XG4gIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC50YXJnZXQgPT09IG1vZGFsKSB7XG4gICAgICBjbG9zZU1vZGFsKG1vZGFsKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbmZ1bmN0aW9uIGhhbmRsZUVkaXRGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3Qgc3VibWl0QnV0dG9uID0gZWRpdEZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idG5cIik7XG5cbiAgc2V0U3VibWl0QnV0dG9uU3RhdGUoc3VibWl0QnV0dG9uLCB0cnVlLCBcIlNhdmluZy4uLlwiLCBcIlNhdmVcIik7XG5cbiAgYXBpXG4gICAgLmVkaXRVc2VySW5mbyh7XG4gICAgICBuYW1lOiBlZGl0TW9kYWxOYW1lSW5wdXQudmFsdWUsXG4gICAgICBhYm91dDogZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dC52YWx1ZSxcbiAgICB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICAgIHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXQ7XG4gICAgICBlZGl0Rm9ybUVsZW1lbnQucmVzZXQoKTtcbiAgICAgIGNsb3NlTW9kYWwoZWRpdE1vZGFsKTtcbiAgICAgIHJlc2V0VmFsaWRhdGlvbihlZGl0Rm9ybUVsZW1lbnQsIHNldHRpbmdzKTtcbiAgICAgIC8vIERpc2FibGUgdGhlIGJ1dHRvbiBhZnRlciBzdWNjZXNzZnVsIHN1Ym1pc3Npb25cbiAgICAgIGRpc2FibGVCdXR0b24oc3VibWl0QnV0dG9uLCBzZXR0aW5ncyk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihcIlByb2ZpbGUgdXBkYXRlIGZhaWxlZDpcIiwgZXJyKTtcbiAgICAgIGFsZXJ0KFwiRmFpbGVkIHRvIHVwZGF0ZSBwcm9maWxlLiBQbGVhc2UgdHJ5IGFnYWluLlwiKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHNldFN1Ym1pdEJ1dHRvblN0YXRlKHN1Ym1pdEJ1dHRvbiwgZmFsc2UsIFwiU2F2aW5nLi4uXCIsIFwiU2F2ZVwiKTtcbiAgICAgIGRpc2FibGVCdXR0b24oc3VibWl0QnV0dG9uLCBzZXR0aW5ncyk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNhcmQoY2FyZEVsZW1lbnQsIGRhdGEpIHtcbiAgc2VsZWN0ZWRDYXJkID0gY2FyZEVsZW1lbnQ7XG4gIHNlbGVjdGVkQ2FyZElkID0gZGF0YS5faWQ7XG4gIG9wZW5Nb2RhbChkZWxldGVNb2RhbCk7XG59XG5mdW5jdGlvbiBoYW5kbGVEZWxldGVTdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIHNldFN1Ym1pdEJ1dHRvblN0YXRlKGNvbmZpcm1EZWxldGVCdXR0b24sIHRydWUsIFwiRGVsZXRpbmcuLi5cIiwgXCJEZWxldGVcIik7XG5cbiAgYXBpXG4gICAgLmRlbGV0ZUNhcmQoc2VsZWN0ZWRDYXJkSWQpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgc2VsZWN0ZWRDYXJkLnJlbW92ZSgpO1xuICAgICAgY2xvc2VNb2RhbChkZWxldGVNb2RhbCk7XG4gICAgICBzZWxlY3RlZENhcmQgPSBudWxsO1xuICAgICAgc2VsZWN0ZWRDYXJkSWQgPSBudWxsO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkZWxldGluZyBjYXJkOlwiLCBlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgc2V0U3VibWl0QnV0dG9uU3RhdGUoY29uZmlybURlbGV0ZUJ1dHRvbiwgZmFsc2UsIFwiRGVsZXRlXCIsIFwiRGVsZXRlXCIpO1xuICAgIH0pO1xufVxuXG5kZWxldGVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlRGVsZXRlU3VibWl0KTtcblxuZnVuY3Rpb24gaGFuZGxlTGlrZUNsaWNrKGNhcmRJZCwgbGlrZUJ1dHRvbikge1xuICAvLyAxLiBDaGVjayBpZiB0aGUgY2FyZCBpcyBjdXJyZW50bHkgbGlrZWRcbiAgY29uc3QgaXNMaWtlZCA9IGxpa2VCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FyZF9fbGlrZS1idG5fbGlrZWRcIik7XG5cbiAgYXBpXG4gICAgLmxpa2VTdGF0dXMoY2FyZElkLCBpc0xpa2VkKVxuICAgIC50aGVuKCh1cGRhdGVkQ2FyZCkgPT4ge1xuICAgICAgaWYgKHVwZGF0ZWRDYXJkLmlzTGlrZWQpIHtcbiAgICAgICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idG5fbGlrZWRcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ0bl9saWtlZFwiKTtcbiAgICAgIH1cbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgbGlrZSBzdGF0dXM6XCIsIGVycik7XG4gICAgfSk7XG59XG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGVkaXRNb2RhbE5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xuICBlZGl0TW9kYWxEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50O1xuXG4gIHJlc2V0VmFsaWRhdGlvbihlZGl0Rm9ybUVsZW1lbnQsIHNldHRpbmdzKTtcbiAgb3Blbk1vZGFsKGVkaXRNb2RhbCk7XG59KTtcblxuZWRpdE1vZGFsQ2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VNb2RhbChlZGl0TW9kYWwpO1xufSk7XG5cbmNhcmRFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG9wZW5Nb2RhbChjYXJkTW9kYWwpO1xufSk7XG5cbmNhcmRNb2RhbENsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlTW9kYWwoY2FyZE1vZGFsKTtcbn0pO1xuXG5lZGl0Rm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVFZGl0Rm9ybVN1Ym1pdCk7XG5jYXJkRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUFkZENhcmRTdWJtaXQpO1xuXG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwic2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3ViYm1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJoaWRlSW5wdXRFcnJvciIsImZvcm1FbCIsImlucHV0RWwiLCJjb25maWciLCJxdWVyeVNlbGVjdG9yIiwiY29uY2F0IiwiaWQiLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRMaXN0IiwiYnV0dG9uRWwiLCJzb21lIiwiaW5wdXQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJkaXNhYmxlQnV0dG9uIiwiYWRkIiwiZW5hYmxlVmFsaWRhdGlvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJBcnJheSIsImZyb20iLCJidXR0b25FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnNvbGUiLCJsb2ciLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yTXNnIiwic2hvd0lucHV0RXJyb3IiLCJjaGVja0lucHV0VmFsaWRpdHkiLCJzZXRFdmVudExpc3RlbmVycyIsInJlc2V0VmFsaWRhdGlvbiIsIkFwaSIsIl9yZWYiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwia2V5IiwidmFsdWUiLCJQcm9taXNlIiwiYWxsIiwiZ2V0VXNlckluZm8iLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsInRoZW4iLCJfY2hlY2tSZXNwb25zZSIsIl9yZWYyIiwibmFtZSIsImFib3V0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJkYXRhIiwicmVzIiwib2siLCJqc29uIiwicmVqZWN0Iiwic3RhdHVzIiwiaXNMaWtlZCIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUF2YXRhckJ0biIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwiY2FyZHNMaXN0IiwiY2FyZEVkaXRCdXR0b24iLCJlZGl0TW9kYWwiLCJlZGl0Rm9ybUVsZW1lbnQiLCJmb3JtcyIsImVkaXRNb2RhbENsb3NlQnRuIiwiZWRpdE1vZGFsTmFtZUlucHV0IiwiZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dCIsImNhcmRNb2RhbCIsImNhcmRGb3JtIiwiY2FyZE1vZGFsQ2xvc2VCdG4iLCJjYXJkTmFtZUlucHV0IiwiY2FyZExpbmtJbnB1dCIsInByZXZpZXdNb2RhbCIsInByZXZpZXdNb2RhbEltYWdlRWxlbWVudCIsInByZXZpZXdNb2RhbENhcHRpb25FbGVtZW50IiwicHJldmlld01vZGFsQ2xvc2VCdG4iLCJhdmF0YXJNb2RhbCIsImF2YXRhckZvcm0iLCJhdmF0YXJVcmxJbnB1dCIsImF2YXRhck1vZGFsQ2xvc2VCdG4iLCJkZWxldGVNb2RhbCIsImRlbGV0ZU1vZGFsQ2xvc2VCdG4iLCJjb25maXJtRGVsZXRlQnV0dG9uIiwiY2FuY2VsRGVsZXRlQnV0dG9uIiwiZGVsZXRlRm9ybSIsInNyYyIsImxvZ28iLCJhdmF0YXIiLCJwZW5jaWwiLCJwbHVzIiwicGVuY2lsRWRpdEF2YXRhciIsInNlbGVjdGVkQ2FyZCIsInNlbGVjdGVkQ2FyZElkIiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsInNldFN1Ym1pdEJ1dHRvblN0YXRlIiwiYnV0dG9uIiwiaXNMb2FkaW5nIiwibG9hZGluZ1RleHQiLCJkZWZhdWx0VGV4dCIsInRvZ2dsZSIsImdldENhcmRFbGVtZW50IiwiY2FyZERhdGEiLCJjYXJkRWxlbWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfaWQiLCJjYXJkSW1hZ2UiLCJjYXJkVGl0bGUiLCJjYXJkTGlrZUJ1dHRvbiIsImRlbGV0ZUJ1dHRvbiIsImxpbmsiLCJhbHQiLCJvcGVuTW9kYWwiLCJoYW5kbGVEZWxldGVDYXJkIiwiY2FyZElkIiwibGlrZUJ1dHRvbiIsImNvbnRhaW5zIiwibGlrZVN0YXR1cyIsInVwZGF0ZWRDYXJkIiwiZXJyIiwiZXJyb3IiLCJtb2RhbCIsImhhbmRsZUVzY2FwZUtleSIsImNsb3NlTW9kYWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0IiwiZ2V0QXBwSW5mbyIsInVzZXJEYXRhIiwiY2FyZHMiLCJpdGVtIiwiYXBwZW5kIiwiZ2V0RWxlbWVudEJ5SWQiLCJkYXRhc2V0IiwiY2FyZFRvRGVsZXRlIiwicmVwbGFjZSIsImRlbGV0ZUNhcmQiLCJwcmV2ZW50RGVmYXVsdCIsInN1Ym1pdEJ1dHRvbiIsImF2YXRhckltZyIsInVwZGF0ZUF2YXRhciIsIkRhdGUiLCJub3ciLCJyZXNldCIsImFsZXJ0IiwidGFyZ2V0IiwiZWRpdFVzZXJJbmZvIiwiYWRkQ2FyZCIsInByZXBlbmQiXSwic291cmNlUm9vdCI6IiJ9